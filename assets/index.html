<!DOCTYPE html>
<html lang="ja">

<head>
  <title>Top / SAP</title>

  <meta charset="utf-8">
  <meta name="theme-color" content="#1E90FF">

  <meta property="og:image" content="https://${Domain}/assets/image/favicon.png" />
  <meta property="og:title" content="Top / SAP" />
  <meta property="og:site_name" content="Simple Activiy Pub" />
  <meta property="og:description" content="Twitter Likeな Mastdon/Misskey 対応 SNS" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="Owner ${Owner}" />
  <meta name="twitter:creator" content="Owner ${Owner}" />

  <link href="/assets/image/favicon.png" rel="icon">
  <link href="/assets/css/contains.css" rel="stylesheet" />

</head>

<body>
  <div class="flame">
    <div class="left">
      <div class="head">
        Action
      </div>
      <div class="action">
        🏠Home
      </div>
      <div class="action">
        🔔Notice
      </div>
      <div class="action">
        👪Profile
      </div>
      <div class="action">
        <span>🔍</span><input type="text" class="search-box">
      </div>
      <div class="action">
        <form class="note-area">
          <textarea type="text" class="note-text" name="text"></textarea>
          <label class="note-attachment">
            <input type="file" accept="image/*,video/*" name="attachment" style="display: none;" multiple
              id="attachment">画像/動画
          </label>
          <soan id="attachment-error"></soan>
          <br>
          <input type="submit" value="送信">
        </form>
      </div>
      <div id="attachment-preview"></div>
    </div>
    <div class="right">
      <div class="head">
        TimeLine
      </div>
    </div>
  </div>
</body>

<script id="init_script">
  // const Body = document.getElementById("body")
  const InitScript = document.getElementById("init_script")

  window.addEventListener("load", async function () {
    const attach = document.getElementById("attachment")
    const attachErr = document.getElementById("attachment-error")

    attach.addEventListener("change", function (e) {
      attachErr.innerText = ""
      const files = attach.files
      if (files.length > 4) {
        e.preventDefault()
        document.getElementById("attachment-error").innerText = "Error: Not Accept Files.len >4"
      }

      const preview = document.getElementById("attachment-preview");
      while (preview.firstChild) {
        preview.removeChild(preview.firstChild);
      }

      for (let i = 0; i < files.length; i++) {
        const file = files[i]
        if (file.type.startsWith("image")) {
          var img = document.createElement("img");
          img.setAttribute("src", URL.createObjectURL(file));
          img.classList.add("note-preview")
          preview.appendChild(img);
        }
        if (file.type.startsWith("video")) {
          var video = document.createElement("video");
          video.setAttribute("src", URL.createObjectURL(file));
          video.classList.add("note-preview")
          preview.appendChild(video);
        }
      }
    })
    // 削除
    InitScript.remove()
  })
</script>

</html>